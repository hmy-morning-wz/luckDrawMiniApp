var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function getPagePath() {
  try {
    // var a = getCurrentPages()
    var a = getCurrentPages()[getCurrentPages().length - 1];
    return a.route;
  } catch (c) {
    console.log('Mtr get current page path error:' + c);
  }
}
function getMainInfo() {
  var a = { url: getPagePath()
    //console.log(a)
  };return a;
}

function dateFormat(t, format) {
  var fmt = format || 'yyyy-MM-dd hh:mm:ss.S';
  if ((typeof t === 'undefined' ? 'undefined' : _typeof(t)) !== 'object') {
    t = new Date(t);
  }
  var o = {
    'M+': t.getMonth() + 1, //月份
    'd+': t.getDate(), //日
    'h+': t.getHours(), //小时
    'm+': t.getMinutes(), //分
    's+': t.getSeconds(), //秒
    'q+': Math.floor((t.getMonth() + 3) / 3), //季度
    S: t.getMilliseconds() //毫秒
  };
  if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (t.getFullYear() + '').substr(4 - RegExp.$1.length));
  for (var k in o) {
    if (new RegExp('(' + k + ')').test(fmt)) fmt = fmt.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length));
  }return fmt;
}
function _formatExinfoParam(e) {
  var t = [];
  for (var r in e) {
    e.hasOwnProperty(r) && t.push(r + '=' + this._encodeStr(e[r]));
  }return t.join('^');
}

function _encodeStr(e) {
  return 'string' == typeof e ? e.replace(/=|,|\^|\$\$/g, function (e) {
    switch (e) {
      case ',':
        return '%2C';
      case '^':
        return '%5E';
      case '$$':
        return '%24%24';
      case '=':
        return '%3D';
      default:
        return ' ';
    }
  }) : e;
}

export default {
  _encodeStr: _encodeStr,
  _formatExinfoParam: _formatExinfoParam,
  getMainInfo: getMainInfo,
  dateFormat: dateFormat
};